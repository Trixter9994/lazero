import pyautogui
import time
from stackMe import queue
import multiprocessing
import fuckMe
import base64
# from rout6 import jerk
from darkmart import sendMe
# there is no cracking, only communication.
import os
# launch that thing.
# rule of god: there must be one in the network which has bind to an address.
# fuck these shits.
# all fucking bullshits.
# this is shit.
def youAreDead0(a):
    a0 = str(a).encode("utf-8")
    a1 = base64.b64encode(a0)
    a2 = a1.decode()
    return a2
# this is just a little problem.
# get the shit base64 encoded?
# why you load it multiple times?
# seek for connection.
# this is awful.
# this import is wrong?
# from rout4 import useMePlease
# do we need a broker?
# an intermediate shit?
# set it up first?
# import zmq
# port = "5558"
# context = zmq.Context()
# socket = context.socket(zmq.PUB)
# # socket.connect("tcp://127.0.0.7:%s" % port)
# # morphous?
# they are all dead.
# what the fuck?
# socket.bind("tcp://127.0.0.8:%s" % port)
# # why this address is always in use?
# def useMePlease(x):
#     socket.send_pyobj(x)
    # what on earth have we not done yet?
# from multiprocessing import Process
# async or sync?
def getDone(a,b):
  with open(b,"w+") as f:
    f.write(a)
def saveSession(a,b,c=2):
  a0 = int(time.time())
  # do you even write shit?
  for x, y in a:
    if len(x)>=c:
      getDone(x, b + "\\" + str(a0) + "-" + str(y)[1:-1].replace(" ", ""))
def default(x):
  # really? are we gonna work it out?
  # what the fuck?
  time.sleep(x)
  return pyautogui.screenshot()
def getCore():
  # no just consider normal situation.
  # i said that you will die.
  # what the fuck?
  # plant never dies. it just decays.
  # you don't have shit and you don't get shit.
  return queue(2)
def checkState(a):
  return a.length() == 2


if __name__ == "__main__":
  multiprocessing.freeze_support()
  # use subprocess.
  os.popen("python36 broker.py 127.0.0.7 3000 2000")
  # oh shit, nearly forgot.
  # launch another shit?
  # both use connect.
  f=getCore()
  while True:
    d = default(5)
    # print(type(d))
    f.queue(d)
    if checkState(f):
      x,y=f.dump()
      c0 = fuckMe.cropDifference(x, y)
      # better import something?
      # this sucks.
      # receive python object?
      # use process?
      # useMePlease(c0)
      # jerk(c0)
      # eat your dick.
      # this time we go for connection!
      # what the fuck?
      # this sucks.
      # why always address in use?
      # i have shit.
      # what the fuck?
      # well, address in use.
      # px = Process(target=jerk, args=(c0,))
      # print(dir(px))
      # all shits.
      # dickheads.
      sendMe(c0)
      # publisher is not a broadcaster.
      # you can do the real-time streaming later.
      # well, we can use listening.
      # never mind.
      # it sounds great.
      # connection?
      # omega = youAreDead0(c0)
      # os.system("python36 rout6.py "+omega)
      # what the fuck?
      saveSession(c0, "point_of_plot")
      # this will be long and tedious.
      # since it will take time.
      # print("________________________________")
      # print(c0)
      # print("________________________________")
  # do the logging.
  # we all can fake things.
# time.sleep(1)
# this sucks.
# too damn verbose.
# shit.
# now you understand this a little bit more?
# eat your dick.
# pyautogui.click(button="right")
# s0=pyautogui.screenshot()
# just let my fucking life become easier.
# store the thing into a txt file.
# i would like to look through things.
# shots of my daliy fucking life.
# can make it into my fucking usb drive?
# select those with possible text.
# difference -> readable text
